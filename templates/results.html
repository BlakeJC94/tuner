{% extends "base.html" %}

{% block title %}Tuner{% endblock %}

{% block content %}

<style>
</style>
<section class="center-justify">
    <h1>Your Music Match</h1>
</section>
<section class="center-justify">
    <div class="container">
        <!-- Matching Profile Section -->
        <section class="center-justify">
            <h2>
                You matched with
                <a href="{{ match.profile_link }}" class="profile-link">{{ match.name }}</a>
                ({{ match.score }}%)
            </h2>
        </section>

        <!-- Images Section -->
        <div class="image-gallery">
            {% for url in match.image_urls %}
            <div class="image-container">
                <img src="{{ url }}" alt="Related Image" />
            </div>
            {% endfor %}
        </div>

        <!-- Common Genres Section -->
        <div class="section">
            <h2>Common Genres</h2>
            <ul>
                {% for genre in match.common_genres %}
                <li>{{ genre }}</li>
                {% endfor %}
            </ul>
        </div>

        <!-- Common Artists Section -->
        <div class="section">
            <h2>Common Artists</h2>
            <ul>
                {% for artist in match.common_artists %}
                <li>{{ artist }}</li>
                {% endfor %}
            </ul>
        </div>

        <!-- Recommended Artists Section -->
        {% if match.recommended_artists %}
        <div class="section">
            <h2>Artists You May Like</h2>
            <ul>
                {% for artist in match.recommended_artists %}
                <li>{{ artist }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}

        <!-- Playlist suggestion -->
        <h2>Spotify Playlist</h2>
        <table class="playlist-table">
            <thead>
                <tr>
                    <th>Image</th>
                    <th>Track</th>
                    <th>Artist</th>
                    <th>Album</th>
                </tr>
            </thead>
            <tbody>
                {% for track in match.tracks %}
                <tr>
                    <td><img src="{{ track.image_url }}" alt="{{ track.name }} cover" class="track-image"></td>
                    <td>{{ track.name }}</td>
                    <td>{{ track.artists }}</td>
                    <td>{{ track.album }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <a href="{{ url_for('results') }}" class="cta-button-large">Add playlist to Spotify</a>
</section>
<section class="center-justify">
    <div class="donation-section">
        <p style="text-align: center;">If you enjoyed this service and want to support it, consider buying me a coffee :)</p>
        <form action="https://www.paypal.com/donate" method="post" target="_blank">
            <input type="hidden" name="business" value="blakejamescook@gmail.com">
            <input type="hidden" name="no_recurring" value="0">
            <input type="hidden" name="currency_code" value="USD">
            <input type="hidden" name="item_name" value="Support Tuner Development">
            <button type="submit" style="background-color: #0070ba; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                Donate
            </button>
        </form>
    </div>
</section>

{% endblock %}
